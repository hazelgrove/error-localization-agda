%
% Utilities
%
\definecolor{lavender}{RGB}{162,85,162}

%
% Judgments
%

% Judgments
\newcommand{\judgment}[3]{\inferrule{#1}{#2}~~{\textsc{\small [#3]}}}
\newcommand{\judgbox}[1]{\noindent \fbox{$#1$}}

% Consistency
\newcommand{\consistent}[2]{\ensuremath{#1 \sim #2}}
\newcommand{\inconsistent}[2]{\ensuremath{#1 \nsim #2}}

% Matching
\newcommand{\matchedRel}[1]{\ensuremath{\blacktriangleright_{#1}}}
\newcommand{\notMatchedRel}[1]{\ensuremath{\not\matchedRel{#1}}}
\newcommand{\matchedArrowRel}{\ensuremath{\matchedRel{\to}}}
\newcommand{\notMatchedArrowRel}{\ensuremath{\notMatchedRel{\to}}}
\newcommand{\matchedArrow}[3]{\ensuremath{#1 \matchedArrowRel \TArrow{#2}{#3}}}
\newcommand{\notMatchedArrow}[3]{\ensuremath{#1 \notMatchedArrowRel \TArrow{#2}{#3}}}
\newcommand{\matchedPairRel}{\ensuremath{\matchedRel{\times}}}
\newcommand{\notMatchedPairRel}{\ensuremath{\notMatchedRel{\times}}}
\newcommand{\matchedPair}[3]{\ensuremath{#1 \matchedPairRel \TPair{#2}{#3}}}
\newcommand{\notMatchedPair}[3]{\ensuremath{#1 \notMatchedPairRel \TPair{#2}{#3}}}

% Contexts
\newcommand{\ctx}{\ensuremath{\Gamma}}
\newcommand{\extendCtx}[3]{\ensuremath{#1 ; ~\assignType{#2}{#3}}}
\DeclareMathOperator{\dom}{dom}
\newcommand{\inCtx}[3]{\ensuremath{#2, #3 \in #1}}
\newcommand{\notInCtx}[2]{\ensuremath{#2 \not\in \dom(#1)}}
\newcommand{\withCtx}[2]{\ensuremath{#1 \vdash #2}}

% Typing
\newcommand{\assignType}[2]{\ensuremath{#1 : #2}}
\newcommand{\ctxAssignType}[3]{\ensuremath{\withCtx{#1}{\assignType{#2}{#3}}}}
\newcommand{\synType}[2]{\ensuremath{#1 \Rightarrow #2}}
\newcommand{\ctxSynType}[3]{\ensuremath{\withCtx{#1}{\synType{#2}{#3}}}}
\newcommand{\anaType}[2]{\ensuremath{#1 \Leftarrow #2}}
\newcommand{\ctxAnaType}[3]{\ensuremath{\withCtx{#1}{\anaType{#2}{#3}}}}

% Erasure
\newcommand{\erase}[1]{\ensuremath{#1^{\square}}}
\newcommand{\erasesTo}[2]{\ensuremath{#1^{\square} = #2}}

% Hole insertion
\newcommand{\synFixedInto}[3]{\ensuremath{\synType{#1 \looparrowright #2}{#3}}}
\newcommand{\ctxSynFixedInto}[4]{\ensuremath{\withCtx{#1}{\synFixedInto{#2}{#3}{#4}}}}
\newcommand{\anaFixedInto}[3]{\ensuremath{\anaType{#1 \looparrowright #2}{#3}}}
\newcommand{\ctxAnaFixedInto}[4]{\ensuremath{\withCtx{#1}{\anaFixedInto{#2}{#3}{#4}}}}

% 
% Types
%
\newcommand{\TMName}{\textsf{Type}}
\newcommand{\TMV}{\ensuremath{\tau}}
\newcommand{\TJoin}[2]{\ensuremath{#1 \sqcup #2}}
\DeclareMathOperator{\?}{?}

\newcommand{\TUnknown}{\ensuremath{\?}}
\newcommand{\TInt}{\ensuremath{\textsf{Num}}}
\newcommand{\TBool}{\ensuremath{\textsf{Bool}}}
\newcommand{\TArrow}[2]{\ensuremath{#1 \to #2}}
\newcommand{\TPair}[2]{\ensuremath{#1 \times #2}}

%
% External expressions
%
\newcommand{\EMName}{\textsf{Exp}}
\newcommand{\EMV}{\ensuremath{e}}

% Holes
\newcommand{\EEHole}{\ECEHole}

% Integers
\newcommand{\EInt}[1]{\ECInt{#1}}
\newcommand{\EIntMV}{\ECIntMV}
\newcommand{\EOpPlus}{\ECOpPlus}
\newcommand{\EPlus}[2]{\ECPlus{#1}{#2}}

% Booleans
\newcommand{\ETrue}{\ECTrue}
\newcommand{\EFalse}{\ECFalse}
\newcommand{\EIf}[3]{\ECIf{#1}{#2}{#3}}

% Lambdas
\newcommand{\ELam}[3]{\ECLam{#1}{#2}{#3}}
\newcommand{\EAp}[2]{\ECAp{#1}{#2}}

% Pairs
\newcommand{\EPair}[2]{\ECPair{#1}{#2}}
\newcommand{\EProjL}[1]{\ECProjL{#1}}
\newcommand{\EProjR}[1]{\ECProjR{#1}}

%
% Internal expressions
%
\newcommand{\ECMName}{\textsf{MExp}}
\newcommand{\ECMV}{\ensuremath{\check{e}}}

% Holes
\newcommand{\ECEHole}{\ensuremath{\textcolor{lavender}{\bm{\llparenthesis}}\textcolor{lavender}{\bm{\rrparenthesis}}}}

% Integers
\newcommand{\ECInt}[1]{\ensuremath{\underline{#1}}}
\newcommand{\ECIntMV}{\ensuremath{\ECInt{n}}}
\newcommand{\ECOpPlus}{\ensuremath{+}}
\newcommand{\ECPlus}[2]{\ensuremath{#1 \ECOpPlus #2}}

% Booleans
\newcommand{\ECTrue}{\ensuremath{\textsf{tt}}}
\newcommand{\ECFalse}{\ensuremath{\textsf{ff}}}
\newcommand{\ECIf}[3]{\ensuremath{#1 ~?~ #2 : #2}}

% Lambdas
\newcommand{\ECLam}[3]{\ensuremath{\lambda #1 : #2. ~#3}}
\newcommand{\ECAp}[2]{\ensuremath{#1 ~#2}}
\newcommand{\ECNonMatchedAp}[2]{\ensuremath{\textcolor{red}{[}\ECAp{#1}{#2}\textcolor{red}{]}}}

% Pairs
\newcommand{\ECPair}[2]{\ensuremath{(#1, #2)}}
\newcommand{\ECProjL}[1]{\ensuremath{#1.0}}
\newcommand{\ECProjR}[1]{\ensuremath{#1.1}}

% Errors
\newcommand{\ECUnbound}[1]{\ensuremath{\textcolor{red}{\bm{[}}#1\textcolor{red}{\bm{]}}}}
\newcommand{\ECInconType}[1]{\ensuremath{\textcolor{red}{\bm{\llparenthesis}}#1\textcolor{red}{\bm{\rrparenthesis}}}}
\newcommand{\ECInconBr}[3]{\ensuremath{\textcolor{red}{\bm{[}}\ECIf{#1}{#2}{#3}\textcolor{red}{\bm{]}}}}
\newcommand{\ECInconMatched}[2]{\ensuremath{\textcolor{red}{[}#1\textcolor{red}{]^{\not#2}}}}
\newcommand{\ECInconMatchedArrow}[1]{\ensuremath{\ECInconMatched{#1}{\matchedArrowRel}}}
\newcommand{\ECInconMatchedPair}[1]{\ensuremath{\ECInconMatched{#1}{\matchedPairRel}}}
