\documentclass[formalism.tex]{subfiles}

\begin{document}
\input{symbols/types}
\input{symbols/expressions}
\input{symbols/marked}
\input{symbols/untyped}
\input{symbols/typed}

\section{Typed hazelnut}
\label{sec:typed}
We now give a description of a \emph{typed} version of the Hazelnut action calculus that
incorporates the marked lambda calculus to solve the problem of non-local hole fixes. Here, unlike
in the integration of the untyped version and the marked lambda calculus given in
\cref{sec:untyped}, remarking is performed only when necessary instead of after every action.

\nomechanization{}

\subsection{Syntax}
\label{sec:typed-syntax}
Zippered types are the same as in the untyped model.

\[\begin{array}{rrcl}
  \ZCMName & \ZCMV & \Coloneqq & \ZCCursor{\ECMV} \mid \ZCLamT{x}{\ZTMV}{\ECMV} \mid \ZCLamE{x}{\TMV}{\ZCMV} \mid \ZCApL{\ZCMV}{\ECMV} \mid \ZCApR{\ECMV}{\ZCMV} \\
           &       & \mid         & \ZCLetL{x}{\ZCMV}{\ECMV} \mid \ZCLetR{x}{\ECMV}{\ZCMV} \\
           &       & \mid         & \ZCPlusL{\ZCMV}{\ECMV} \mid \ZCPlusR{\ECMV}{\ZCMV} \\
           &       & \mid         & \ZCIfC{\ZCMV}{\ECMV}{\ECMV} \mid \ZCIfL{\ECMV}{\ZCMV}{\ECMV} \mid \ZCIfR{\ECMV}{\ECMV}{\ZCMV} \\
           &       & \mid         & \ZCPairL{\ZCMV}{\EMV} \mid \ZCPairR{\EMV}{\ZCMV} \mid \ZCProjL{\ZCMV} \mid \ZCProjR{\ZCMV} \\
           &       & \mid         & \ZCFree{x} \mid \ZCInconType{\ZCMV} \\
           &       & \mid         & \ZCLamInconAscT{x}{\ZTMV}{\ECMV} \mid \ZCLamInconAscE{x}{\TMV}{\ZCMV}
                     \mid           \ZCLamAnaNonMatchedArrowT{x}{\ZTMV}{\ECMV} \mid \ZCLamAnaNonMatchedArrowE{x}{\TMV}{\ZCMV}
                     \mid           \ZCApSynNonMatchedArrowL{\ZCMV}{\ECMV} \mid \ZCApSynNonMatchedArrowR{\ECMV}{\ZCMV} \\
           &       & \mid         & \ZCInconBrC{\ZCMV}{\ECMV}{\ECMV} \mid \ZCInconBrL{\ECMV}{\ZCMV}{\ECMV} \mid \ZCInconBrR{\ECMV}{\ECMV}{\ZCMV} \\
           &       & \mid         & \ZCPairAnaNonMatchedProdL{\ZCMV}{\ECMV} \mid \ZCPairAnaNonMatchedProdR{\ECMV}{\ZCMV}
                     \mid           \ZCProjLSynNonMatchedProd{\ZCMV} \mid \ZCProjRSynNonMatchedProd{\ZCMV}
\end{array}\]

\subsubsection{Well-formedness}
\label{sec:typed-well-formedness}
\judgbox{\ensuremath{\zWellFormed{\ZCMV}}} $\ZCMV$ is well-formed
%
\begin{mathpar}
  \inferrule[WFCursor]{ }{
    \zWellFormed{\ZCCursor{\ECMV}}
  }

  \inferrule[WFFree]{ }{
    \zWellFormed{\ZCFree{x}}
  }

  \inferrule[WFLam1]{ }{
    \zWellFormed{\ZCLamT{x}{\ZTMV}{\ECMV}}
  }

  \inferrule[WFLam2]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCLamE{x}{\TMV}{\ZCMV}}
  }

  \inferrule[WFLam3]{
  }{
    \zWellFormed{\ZCLamAnaNonMatchedArrowT{x}{\ZTMV}{\ECMV}}
  }

  \inferrule[WFLam4]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCLamAnaNonMatchedArrowE{x}{\TMV}{\ZCMV}}
  }

  \inferrule[WFLam5]{ }{
    \zWellFormed{\ZCLamInconAscT{x}{\ZTMV}{\ECMV}}
  }

  \inferrule[WFLam6]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCLamInconAscE{x}{\TMV}{\ZCMV}}
  }

  \inferrule[WFAp1]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCApL{\ZCMV}{\ECMV}}
  }

  \inferrule[WFAp2]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCApR{\ECMV}{\ZCMV}}
  }

  \inferrule[WFAp3]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCApSynNonMatchedArrowL{\ZCMV}{\ECMV}}
  }

  \inferrule[WFAp4]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCApSynNonMatchedArrowR{\ECMV}{\ZCMV}}
  }

  \inferrule[WFLet1]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCLetL{x}{\ZCMV}{\ECMV}}
  }

  \inferrule[WFLet2]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCLetR{x}{\ECMV}{\ZCMV}}
  }

  \inferrule[WFPlus1]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCPlusL{\ZCMV}{\ECMV}}
  }

  \inferrule[WFPlus2]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCPlusR{\ECMV}{\ZCMV}}
  }

  \inferrule[WFIf1]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCIfC{\ZCMV}{\ECMV_1}{\ECMV_2}}
  }

  \inferrule[WFIf2]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCIfL{\ECMV_1}{\ZCMV}{\ECMV_2}}
  }

  \inferrule[WFIf3]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCIfR{\ECMV_1}{\ECMV_2}{\ZCMV}}
  }

  \inferrule[WFInconsistentBranches1]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCInconBrC{\ZCMV}{\ECMV_1}{\ECMV_2}}
  }

  \inferrule[WFInconsistentBranches2]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCInconBrL{\ECMV_1}{\ZCMV}{\ECMV_2}}
  }

  \inferrule[WFInconsistentBranches3]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCInconBrR{\ECMV_1}{\ECMV_2}{\ZCMV}}
  }

  \inferrule[WFPair1]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCPairL{\ZCMV}{\ECMV}}
  }

  \inferrule[WFPair2]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCPairR{\ECMV}{\ZCMV}}
  }

  \inferrule[WFPair3]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCPairAnaNonMatchedProdL{\ZCMV}{\ECMV}}
  }

  \inferrule[WFPair4]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCPairAnaNonMatchedProdR{\ECMV}{\ZCMV}}
  }

  \inferrule[WFProjL1]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCProjL{\ZCMV}}
  }

  \inferrule[WFProjL2]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCProjLSynNonMatchedProd{\ZCMV}}
  }

  \inferrule[WFProjR1]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCProjR{\ZCMV}}
  }

  \inferrule[WFProjR2]{
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCProjRSynNonMatchedProd{\ZCMV}}
  }

  \inferrule[WFInconsistentTypes]{
    \notEqual{\ZCMV}{\ZCCursor{\ECMV}} \\
    \zWellFormed{\ZCMV}
  }{
    \zWellFormed{\ZCInconType{\ZCMV}}
  }
\end{mathpar}

\subsection{Cursor erasure}
\label{sec:typed-cursor-erasure}

\subsubsection{Type cursor erasure}
\label{sec:typed-type-cursor-erasure}
Type cursor erasure is the same as in the untyped model.

\subsubsection{Expression cursor erasure}
\label{sec:typed-expression-cursor-erasure}
\judgbox{\ensuremath{\cursorErase{\ZCMV}}} is a metafunction defined as follows:
%
\newcommand{\cursorErasesToRow}[2]{\ensuremath{\cursorErase{#1} & = & #2}}
\[\begin{array}{rcl}
  \cursorErasesToRow{\ZCCursor{\ECMV}}{\ECMV} \\
  \cursorErasesToRow{\ZCFree{x}}{\cursorErase{\ECFree{x}}} \\
  \cursorErasesToRow{(\ZCLamT{x}{\ZTMV}{\ECMV})}{\ECLam{x}{(\cursorErase{\ZTMV})}{\ECMV}} \\
  \cursorErasesToRow{(\ZCLamE{x}{\TMV}{\ZCMV})}{\ECLam{x}{\TMV}{(\cursorErase{\ZCMV})}} \\
  \cursorErasesToRow{\ZCLamAnaNonMatchedArrowT{x}{\ZTMV}{\ECMV}}{\ECLamAnaNonMatchedArrow{x}{(\cursorErase{\ZTMV})}{\ECMV}} \\
  \cursorErasesToRow{\ZCLamAnaNonMatchedArrowE{x}{\TMV}{\ZCMV}}{\ECLamAnaNonMatchedArrow{x}{\TMV}{(\cursorErase{\ZCMV})}} \\
  \cursorErasesToRow{\ZCLamInconAscT{x}{\ZTMV}{\ECMV}}{\ECLamInconAsc{x}{(\cursorErase{\ZTMV})}{\ECMV}} \\
  \cursorErasesToRow{\ZCLamInconAscE{x}{\TMV}{\ZCMV}}{\ECLamInconAsc{x}{\TMV}{(\cursorErase{\ZCMV})}} \\
  \cursorErasesToRow{(\ZCApL{\ZCMV}{\ECMV})}{\ECAp{(\cursorErase{\ZCMV})}{\ECMV}} \\
  \cursorErasesToRow{(\ZCApR{\ECMV}{\ZCMV})}{\ECAp{\ECMV}{(\cursorErase{\ZCMV})}} \\
  \cursorErasesToRow{(\ZCApSynNonMatchedArrowL{\ZCMV}{\ECMV})}{\ECApSynNonMatchedArrow{\cursorErase{\ZCMV}}{\ECMV}} \\
  \cursorErasesToRow{(\ZCApSynNonMatchedArrowR{\ECMV}{\ZCMV})}{\ECApSynNonMatchedArrow{\ECMV}{(\cursorErase{\ZCMV})}} \\
  \cursorErasesToRow{(\ZCLetL{x}{\ZCMV}{\ECMV})}{\ECLet{x}{(\cursorErase{\ZCMV})}{\ECMV}} \\
  \cursorErasesToRow{(\ZCLetR{x}{\ECMV}{\ZCMV})}{\ECLet{x}{\ECMV}{(\cursorErase{\ZCMV})}} \\
  \cursorErasesToRow{(\ZCPlusL{\ZCMV}{\ECMV})}{\ECPlus{(\cursorErase{\ZCMV})}{\ECMV}} \\
  \cursorErasesToRow{(\ZCPlusR{\ECMV}{\ZCMV})}{\ECPlus{\ECMV}{(\cursorErase{\ZCMV})}} \\
  \cursorErasesToRow{(\ZCIfC{\ZCMV}{\ECMV_1}{\ECMV_2})}{\ECIf{(\cursorErase{\ZCMV})}{\ECMV_1}{\ECMV_2}} \\
  \cursorErasesToRow{(\ZCIfL{\ECMV_1}{\ZCMV}{\ECMV_2})}{\ECIf{\ECMV_1}{(\cursorErase{\ZCMV})}{\ECMV_2}} \\
  \cursorErasesToRow{(\ZCIfL{\ECMV_1}{\ECMV_2}{\ZCMV})}{\ECIf{\ECMV_1}{\ECMV_2}{(\cursorErase{\ZCMV})}} \\
  \cursorErasesToRow{\ZCInconBrC{\ZCMV}{\ECMV_1}{\ECMV_2}}{\ECInconBr{(\cursorErase{\ZCMV})}{\ECMV_1}{\ECMV_2}} \\
  \cursorErasesToRow{\ZCInconBrL{\ECMV_1}{\ZCMV}{\ECMV_2}}{\ECInconBr{\ECMV_1}{(\cursorErase{\ZCMV})}{\ECMV_2}} \\
  \cursorErasesToRow{\ZCInconBrR{\ECMV_1}{\ECMV_2}{\ZCMV}}{\ECInconBr{\ECMV_1}{\ECMV_2}{(\cursorErase{\ZCMV})}} \\
  \cursorErasesToRow{\ZCPairL{\ZCMV}{\ECMV}}{\ECPair{\cursorErase{\ZCMV}}{\ECMV}} \\
  \cursorErasesToRow{\ZCPairR{\ECMV}{\ZCMV}}{\ECPair{\ECMV}{\cursorErase{\ZCMV}}} \\
  \cursorErasesToRow{\ZCPairAnaNonMatchedProdL{\ZCMV}{\ECMV}}{\ECPairAnaNonMatchedProd{\cursorErase{\ZCMV}}{\ECMV}} \\
  \cursorErasesToRow{\ZCPairAnaNonMatchedProdR{\ECMV}{\ZCMV}}{\ECPairAnaNonMatchedProd{\ECMV}{\cursorErase{\ZCMV}}} \\
  \cursorErasesToRow{(\ZCProjL{\ZCMV})}{\ECProjL{(\cursorErase{\ZCMV})}} \\
  \cursorErasesToRow{(\ZCProjLSynNonMatchedProd{\ZCMV})}{\ECProjLSynNonMatchedProd{\cursorErase{\ZCMV}}} \\
  \cursorErasesToRow{(\ZCProjR{\ZCMV})}{\ECProjR{(\cursorErase{\ZCMV})}} \\
  \cursorErasesToRow{(\ZCProjRSynNonMatchedProd{\ZCMV})}{\ECProjRSynNonMatchedProd{\cursorErase{\ZCMV}}} \\
  \cursorErasesToRow{\ZCInconType{\ZCMV}}{\ECInconType{\cursorErase{\ZCMV}}} \\
\end{array}\]

\subsection{Action model}
\label{sec:typed-action-model}
The action syntax is the same in the untyped model.

\subsubsection{Shape sort}
\label{sec:typed-shape-sort}
The shape sort judgments are the same as in the untyped model.

\subsubsection{Type actions}
\label{sec:typed-type-actions}
Type actions are the same as in the untyped model.

\subsubsection{Expression movement}
\label{sec:typed-expression-movement}
\judgbox{\ensuremath{\AUEMove{\ZCMV}{\ZCMV'}{\MMV}}}
%
\begin{mathparpagebreakable}
  \inferrule[AEMLamChild1]{ }{
    \ASEMChild{\ECLam{x}{\TMV}{\ECMV}}{\ZCLamT{x}{\ZTCursor{\TMV}}{\ECMV}}{1}
  }

  \inferrule[AEMLamChild2]{ }{
    \ASEMChild{\ECLam{x}{\TMV}{\ECMV}}{\ZCLamE{x}{\TMV}{\ZCCursor{\ECMV}}}{2}
  }

  \inferrule[AEMLamChild3]{ }{
    \ASEMChild{\ECLamAnaNonMatchedArrow{x}{\TMV}{\ECMV}}{\ZCLamAnaNonMatchedArrowT{x}{\ZTCursor{\TMV}}{\ECMV}}{1}
  }

  \inferrule[AEMLamChild4]{ }{
    \ASEMChild{\ECLamAnaNonMatchedArrow{x}{\TMV}{\ECMV}}{\ZCLamAnaNonMatchedArrowE{x}{\TMV}{\ZCCursor{\ECMV}}}{2}
  }

  \inferrule[AEMLamChild5]{ }{
    \ASEMChild{\ECLamInconAsc{x}{\TMV}{\ECMV}}{\ZCLamInconAscT{x}{\ZTCursor{\TMV}}{\ECMV}}{1}
  }

  \inferrule[AEMLamChild6]{ }{
    \ASEMChild{\ECLamInconAsc{x}{\TMV}{\ECMV}}{\ZCLamInconAscE{x}{\TMV}{\ZCCursor{\ECMV}}}{2}
  }

  \inferrule[AEMLamParent1]{ }{
    \ASEMParent{\ZCLamT{x}{\ZTCursor{\TMV}}{\ECMV}}{\ECLam{x}{\TMV}{\ECMV}}
  }

  \inferrule[AEMLamParent2]{ }{
    \ASEMParent{\ZCLamE{x}{\TMV}{\ZCCursor{\ECMV}}}{\ECLam{x}{\TMV}{\ECMV}}
  }

  \inferrule[AEMLamParent3]{ }{
    \ASEMParent{\ZCLamAnaNonMatchedArrowT{x}{\ZTCursor{\TMV}}{\ECMV}}{\ECLamAnaNonMatchedArrow{x}{\TMV}{\ECMV}}
  }

  \inferrule[AEMLamParent4]{ }{
    \ASEMParent{\ZCLamAnaNonMatchedArrowE{x}{\TMV}{\ZCCursor{\ECMV}}}{\ECLamAnaNonMatchedArrow{x}{\TMV}{\ECMV}}
  }

  \inferrule[AEMLamParent5]{ }{
    \ASEMParent{\ZCLamInconAscT{x}{\ZTCursor{\TMV}}{\ECMV}}{\ECLamInconAsc{x}{\TMV}{\ECMV}}
  }

  \inferrule[AEMLamParent6]{ }{
    \ASEMParent{\ZCLamInconAscE{x}{\TMV}{\ZCCursor{\ECMV}}}{\ECLamInconAsc{x}{\TMV}{\ECMV}}
  }

  \inferrule[AEMApChild1]{ }{
    \ASEMChild{\ECAp{\ECMV_1}{\ECMV_2}}{\ZCApL{\ZCCursor{\ECMV_1}}{\ECMV_2}}{1}
  }

  \inferrule[AEMApChild2]{ }{
    \ASEMChild{\ECAp{\ECMV_1}{\ECMV_2}}{\ZCApR{\ECMV_1}{\ZCCursor{\ECMV_2}}}{2}
  }

  \inferrule[AEMApChild3]{ }{
    \ASEMChild{\ECApSynNonMatchedArrow{\ECMV_1}{\ECMV_2}}{\ZCApSynNonMatchedArrowL{\ZCCursor{\ECMV_1}}{\ECMV_2}}{1}
  }

  \inferrule[AEMApChild4]{ }{
    \ASEMChild{\ECApSynNonMatchedArrow{\ECMV_1}{\ECMV_2}}{\ZCApSynNonMatchedArrowR{\ECMV_1}{\ZCCursor{\ECMV_2}}}{2}
  }

  \inferrule[AEMApParent1]{ }{
    \ASEMParent{\ZCApL{\ZCCursor{\ECMV_1}}{\ECMV_2}}{\ECAp{\ECMV_1}{\ECMV_2}}
  }

  \inferrule[AEMApParent2]{ }{
    \ASEMParent{\ZCApR{\ECMV_1}{\ZCCursor{\ECMV_2}}}{\ECAp{\ECMV_1}{\ECMV_2}}
  }

  \inferrule[AEMApParent3]{ }{
    \ASEMParent{\ZCApSynNonMatchedArrowL{\ZCCursor{\ECMV_1}}{\ECMV_2}}{\ECApSynNonMatchedArrow{\ECMV_1}{\ECMV_2}}
  }

  \inferrule[AEMApParent4]{ }{
    \ASEMParent{\ZCApSynNonMatchedArrowR{\ECMV_1}{\ZCCursor{\ECMV_2}}}{\ECApSynNonMatchedArrow{\ECMV_1}{\ECMV_2}}
  }

  \inferrule[AEMLetChild1]{ }{
    \ASEMChild{\ECLet{x}{\ECMV_1}{\ECMV_2}}{\ZCLetL{x}{\ZCCursor{\ECMV_1}}{\ECMV_2}}{1}
  }

  \inferrule[AEMLetChild2]{ }{
    \ASEMChild{\ECLet{x}{\ECMV_1}{\ECMV_2}}{\ZCLetR{x}{\ECMV_1}{\ZCCursor{\ECMV_2}}}{2}
  }

  \inferrule[AEMLetParent1]{ }{
    \ASEMParent{\ZCLetL{x}{\ZCCursor{\ECMV_1}}{\ECMV_2}}{\ECLet{x}{\ECMV_1}{\ECMV_2}}
  }

  \inferrule[AEMLetParent2]{ }{
    \ASEMParent{\ZCLetR{x}{\ECMV_1}{\ZCCursor{\ECMV_2}}}{\ECLet{x}{\ECMV_1}{\ECMV_2}}
  }

  \inferrule[AEMPlusChild1]{ }{
    \ASEMChild{\ECPlus{\ECMV_1}{\ECMV_2}}{\ZCPlusL{\ZCCursor{\ECMV_1}}{\ECMV_2}}{1}
  }

  \inferrule[AEMPlusChild2]{ }{
    \ASEMChild{\ECPlus{\ECMV_1}{\ECMV_2}}{\ZCPlusR{\ECMV_1}{\ZCCursor{\ECMV_2}}}{2}
  }

  \inferrule[AEMPlusParent1]{ }{
    \ASEMParent{\ZCPlusL{\ZCCursor{\ECMV_1}}{\ECMV_2}}{\ECPlus{\ECMV_1}{\ECMV_2}}
  }

  \inferrule[AEMPlusParent2]{ }{
    \ASEMParent{\ZCPlusR{\ECMV_1}{\ZCCursor{\ECMV_2}}}{\ECPlus{\ECMV_1}{\ECMV_2}}
  }

  \inferrule[AEMIfChild1]{ }{
    \ASEMChild{\ECIf{\ECMV_1}{\ECMV_2}{\ECMV_3}}{\ZCIfC{\ZCCursor{\ECMV_1}}{\ECMV_2}{\ECMV_3}}{1}
  }

  \inferrule[AEMIfChild2]{ }{
    \ASEMChild{\ECIf{\ECMV_1}{\ECMV_2}{\ECMV_3}}{\ZCIfL{\ECMV_1}{\ZCCursor{\ECMV_2}}{\ECMV_3}}{2}
  }

  \inferrule[AEMIfChild3]{ }{
    \ASEMChild{\ECIf{\ECMV_1}{\ECMV_2}{\ECMV_3}}{\ZCIfR{\ECMV_1}{\ECMV_2}{\ZCCursor{\ECMV_3}}}{3}
  }

  \inferrule[AEMIfParent1]{ }{
    \ASEMParent{\ZCIfC{\ZCCursor{\ECMV_1}}{\ECMV_2}{\ECMV_3}}{\ECIf{\ECMV_1}{\ECMV_2}{\ECMV_3}}
  }

  \inferrule[AEMIfParent2]{ }{
    \ASEMParent{\ZCIfL{\ECMV_1}{\ZCCursor{\ECMV_2}}{\ECMV_3}}{\ECIf{\ECMV_1}{\ECMV_2}{\ECMV_3}}
  }

  \inferrule[AEMIfParent3]{ }{
    \ASEMParent{\ZCIfR{\ECMV_1}{\ECMV_2}{\ZCCursor{\ECMV_3}}}{\ECIf{\ECMV_1}{\ECMV_2}{\ECMV_3}}
  }

  \inferrule[AEMInconsistentBranchesChild1]{ }{
    \ASEMChild{\ECInconBr{\ECMV_1}{\ECMV_2}{\ECMV_3}}{\ZCInconBrC{\ZCCursor{\ECMV_1}}{\ECMV_2}{\ECMV_3}}{1}
  }

  \inferrule[AEMInconsistentBranchesChild2]{ }{
    \ASEMChild{\ECInconBr{\ECMV_1}{\ECMV_2}{\ECMV_3}}{\ZCInconBrL{\ECMV_1}{\ZCCursor{\ECMV_2}}{\ECMV_3}}{2}
  }

  \inferrule[AEMInconsistentBranchesChild3]{ }{
    \ASEMChild{\ECInconBr{\ECMV_1}{\ECMV_2}{\ECMV_3}}{\ZCInconBrR{\ECMV_1}{\ECMV_2}{\ZCCursor{\ECMV_3}}}{3}
  }

  \inferrule[AEMInconsistentBranchesParent1]{ }{
    \ASEMParent{\ZCInconBrC{\ZCCursor{\ECMV_1}}{\ECMV_2}{\ECMV_3}}{\ECInconBr{\ECMV_1}{\ECMV_2}{\ECMV_3}}
  }

  \inferrule[AEMInconsistentBranchesParent2]{ }{
    \ASEMParent{\ZCInconBrC{\ECMV_1}{\ZCCursor{\ECMV_2}}{\ECMV_3}}{\ECInconBr{\ECMV_1}{\ECMV_2}{\ECMV_3}}
  }

  \inferrule[AEMInconsistentBranchesParent3]{ }{
    \ASEMParent{\ZCInconBrC{\ECMV_1}{\ECMV_2}{\ZCCursor{\ECMV_3}}}{\ECInconBr{\ECMV_1}{\ECMV_2}{\ECMV_3}}
  }

  \inferrule[AEMPairChild1]{ }{
    \ASEMChild{\ECPair{\ECMV_1}{\ECMV_2}}{\ZCPairL{\ZCCursor{\ECMV_1}}{\ECMV_2}}{1}
  }

  \inferrule[AEMPairChild2]{ }{
    \ASEMChild{\ECPair{\ECMV_1}{\ECMV_2}}{\ZCPairR{\ECMV_1}{\ZCCursor{\ECMV_2}}}{2}
  }

  \inferrule[AEMPairChild3]{ }{
    \ASEMChild{\ECPairAnaNonMatchedProd{\ECMV_1}{\ECMV_2}}{\ZCPairAnaNonMatchedProdL{\ZCCursor{\ECMV_1}}{\ECMV_2}}{1}
  }

  \inferrule[AEMPairChild4]{ }{
    \ASEMChild{\ECPairAnaNonMatchedProd{\ECMV_1}{\ECMV_2}}{\ZCPairAnaNonMatchedProdR{\ECMV_1}{\ZCCursor{\ECMV_2}}}{2}
  }

  \inferrule[AEMPairParent1]{ }{
    \ASEMParent{\ZCPairL{\ZCCursor{\ECMV_1}}{\ECMV_2}}{\ECPair{\ECMV_1}{\ECMV_2}}
  }

  \inferrule[AEMPairParent2]{ }{
    \ASEMParent{\ZCPairR{\ECMV_1}{\ZCCursor{\ECMV_2}}}{\ECPair{\ECMV_1}{\ECMV_2}}
  }

  \inferrule[AEMPairParent3]{ }{
    \ASEMParent{\ZCPairAnaNonMatchedProdL{\ZCCursor{\ECMV_1}}{\ECMV_2}}{\ECPairAnaNonMatchedProd{\ECMV_1}{\ECMV_2}}
  }

  \inferrule[AEMPairParent4]{ }{
    \ASEMParent{\ZCPairAnaNonMatchedProdR{\ECMV_1}{\ZCCursor{\ECMV_2}}}{\ECPairAnaNonMatchedProd{\ECMV_1}{\ECMV_2}}
  }

  \inferrule[AEMProjLChild1]{ }{
    \ASEMChild{\ECProjL{\ECMV}}{\ZCProjL{\ZCCursor{\ECMV}}}{1}
  }

  \inferrule[AEMProjLChild2]{ }{
    \ASEMChild{\ECProjLSynNonMatchedProd{\ECMV}}{\ZCProjLSynNonMatchedProd{\ZCCursor{\ECMV}}}{1}
  }

  \inferrule[AEMProjLParent1]{ }{
    \ASEMParent{\ZCProjL{\ZCCursor{\ECMV}}}{\ECProjL{\ECMV}}
  }

  \inferrule[AEMProjLParent2]{ }{
    \ASEMParent{\ZCProjLSynNonMatchedProd{\ZCCursor{\ECMV}}}{\ECProjLSynNonMatchedProd{\ECMV}}
  }

  \inferrule[AEMProjRChild1]{ }{
    \ASEMChild{\ECProjR{\ECMV}}{\ZCProjR{\ZCCursor{\ECMV}}}{1}
  }

  \inferrule[AEMProjRChild2]{ }{
    \ASEMChild{\ECProjRSynNonMatchedProd{\ECMV}}{\ZCProjRSynNonMatchedProd{\ZCCursor{\ECMV}}}{1}
  }

  \inferrule[AEMProjRParent1]{ }{
    \ASEMParent{\ZCProjR{\ZCCursor{\ECMV}}}{\ECProjR{\ECMV}}
  }

  \inferrule[AEMProjRParent2]{ }{
    \ASEMParent{\ZCProjRSynNonMatchedProd{\ZCCursor{\ECMV}}}{\ECProjRSynNonMatchedProd{\ECMV}}
  }

  \inferrule[AEMInconsistentTypesChild]{
    \ASEMChild{\ZCMV}{\ZCMV'}{\MChildNMV}
  }{
    \ASEMChild{\ZCInconType{\ZCMV}}{\ZCInconType{\ZCMV'}}{\MChildNMV}
  }

  \inferrule[AEMInconsistentTypesParent]{
    \ASEMParent{\ZCMV}{\ZCMV'}
  }{
    \ASEMParent{\ZCInconType{\ZCMV}}{\ZCInconType{\ZCMV'}}
  }
\end{mathparpagebreakable}

\subsubsection{Synthetic expression actions}
\label{sec:typed-synthetic-expression-actions}
\judgbox{\ensuremath{\ASAction{\ctx}{\ZCMV}{\TMV}{\ZCMV'}{\TMV'}{\AMV}}}

\paragraph{Movement}
\begin{mathpar}
  \inferrule[ASEMove]{
    \ASEMove{\ZCMV}{\ZCMV'}{\MMV}
  }{
    \ASMove{\ctx}{\ZCMV}{\TMV}{\ZCMV'}{\TMV}{\MMV}
  }
\end{mathpar}

\paragraph{Deletion}
\begin{mathpar}
  \inferrule[ASEDel]{ }{
    \ASEDel{\ctx}{\ECMV}{\TMV}
  }
\end{mathpar}

\paragraph{Construction} \ \\
\begin{mathparpagebreakable}
  \inferrule[ASEConVar]{
    \inCtx{\ctx}{x}{\TMV}
  }{
    \ASCon{\ctx}{\ZCCursor{\ECEHole}}{\TUnknown}{\ZCCursor{x}}{\TMV}{\SVar{x}}
  }

  \inferrule[ASEConFree]{
    \notInCtx{\ctx}{x}
  }{
    \ASCon{\ctx}{\ZCCursor{\ECEHole}}{\TUnknown}{\ZCCursor{\ZCFree{x}}}{\TUnknown}{\SVar{x}}
  }

  \inferrule[ASEConLam]{
    \ctxSynFixedInto{\extendCtx{\ctx}{x}{\TUnknown}}{\erase{\ECMV}}{\ECMV'}{\TMV'}
  }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCLamT{x}{\ZTCursor{\TUnknown}}{\ECMV'}}{\TArrow{\TUnknown}{\TMV'}}{\SLam{x}}
  }

  \inferrule[ASEConApL1]{
    \matchedArrow{\TMV}{\TMV_1}{\TMV_2}
  }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCApL{\ECInconType{\ECMV}}{\ZCCursor{\ECEHole}}}{\TMV_2}{\SApL}
  }

  \inferrule[ASEConApL2]{
    \notMatchedArrow{\TMV}
  }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCApL{\ECInconType{\ECMV}}{\ZCCursor{\ECEHole}}}{\TUnknown}{\SApL}
  }

  \inferrule[ASEConApR]{
    \ctxAnaFixedInto{\ctx}{\erase{\ECMV}}{\ECMV'}{\TUnknown}
  }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCApR{\ZCCursor{\ECEHole}}{\ECMV'}}{\TUnknown}{\SApR}
  }

  \inferrule[ASEConLet1]{ }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCLetL{x}{\ECMV}{\ZCCursor{\ECEHole}}}{\TUnknown}{\SLetL{x}}
  }

  \inferrule[ASEConLet2]{
    \ctxSynFixedInto{\extendCtx{\ctx}{x}{\TUnknown}}{\erase{\ECMV}}{\ECMV'}{\TMV'}
  }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCLetR{x}{\ZCCursor{\ECEHole}}{\ECMV'}}{\TMV'}{\SLetL{x}}
  }

  \inferrule[ASEConNum]{ }{
    \ASCon{\ctx}{\ZCCursor{\ECEHole}}{\TUnknown}{\ZCCursor{\ENumMV}}{\TNum}{\SLit{\ENumMV}}
  }

  \inferrule[ASEConPlusL]{
    \ctxAnaFixedInto{\ctx}{\erase{\ECMV}}{\ECMV'}{\TNum}
  }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCPlusR{\ECMV'}{\ZCCursor{\ECEHole}}}{\TNum}{\SPlusL}
  }

  \inferrule[ASEConPlusR]{
    \ctxAnaFixedInto{\ctx}{\erase{\ECMV}}{\ECMV'}{\TNum}
  }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCPlusL{\ZCCursor{\ECEHole}}{\ECMV'}}{\TNum}{\SPlusR}
  }

  \inferrule[ASEConIfC]{
    \ctxAnaFixedInto{\ctx}{\erase{\ECMV}}{\ECMV'}{\TBool}
  }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCIfL{\ECMV'}{\ZCCursor{\ECEHole}}{\ECEHole}}{\TUnknown}{\SIfC}
  }

  \inferrule[ASEConIfL]{ }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCIfC{\ZCCursor{\ECEHole}}{\ECMV}{\ECEHole}}{\TMV}{\SIfL}
  }

  \inferrule[ASEConIfR]{ }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCIfC{\ZCCursor{\ECEHole}}{\ECEHole}{\ECMV}}{\TMV}{\SIfR}
  }

  \inferrule[ASEConPairL]{ }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCPairL{\ZCCursor{\ECMV}}{\ECEHole}}{\TProd{\TMV}{\TUnknown}}{\SPairL}
  }

  \inferrule[ASEConPairR]{ }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCPairR{\ECEHole}{\ZCCursor{\ECMV}}}{\TProd{\TUnknown}{\TMV}}{\SPairR}
  }

  \inferrule[ASEConProjL]{
    \matchedProd{\TMV}{\TMV_1}{\TMV_2}
  }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCProjL{\ZCCursor{\ECMV}}}{\TMV_1}{\SProjL}
  }

  \inferrule[ASEConProjL2]{
    \notMatchedProd{\TMV}
  }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCProjLSynNonMatchedProd{\ZCCursor{\ECMV}}}{\TUnknown}{\SProjL}
  }

  \inferrule[ASEConProjR1]{
    \matchedProd{\TMV}{\TMV_1}{\TMV_2}
  }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCProjR{\ZCCursor{\ECMV}}}{\TMV_2}{\SProjR}
  }

  \inferrule[ASEConProjR2]{
    \notMatchedProd{\TMV}
  }{
    \ASCon{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCProjRSynNonMatchedProd{\ZCCursor{\ECMV}}}{\TUnknown}{\SProjR}
  }
\end{mathparpagebreakable}

\paragraph{Zipper Cases} \ \\
\begin{mathparpagebreakable}
  \inferrule[ASEZipLamT1]{
    \AUTAction{\ZTMV_1}{\ZTMV_1'}{\AMV} \\
    \equal{\cursorErase{\ZTMV_1}}{\cursorErase{\ZTMV_1'}}
  }{
    \ASEAction{\ctx}{\ZCLamT{x}{\ZTMV_1}{\ECMV}}{\TArrow{\cursorErase{\ZTMV_1}}{\TMV_2}}{\ZCLamT{x}{\ZTMV_1'}{\ECMV}}{\TArrow{\cursorErase{\ZTMV_1}}{\TMV_2}}{\AMV}
  }

  \inferrule[ASEZipLamT2]{
    \AUTAction{\ZTMV_1}{\ZTMV_1'}{\AMV} \\
    \notEqual{\cursorErase{\ZTMV_1}}{\cursorErase{\ZTMV_1'}} \\
    \ctxSynFixedInto{\extendCtx{\ctx}{x}{\cursorErase{\ZTMV_1'}}}{\erase{\ECMV}}{\ECMV'}{\TMV_2'}
  }{
    \ASEAction{\ctx}{\ZCLamT{x}{\ZTMV_1}{\ECMV}}{\TArrow{\cursorErase{\ZTMV_1}}{\TMV_2}}{\ZCLamT{x}{\ZTMV_1'}{\ECMV'}}{\TArrow{\cursorErase{\ZTMV_1'}}{\TMV_2'}}{\AMV}
  }

  \inferrule[ASEZipLamE]{
    \ASEAction{\extendCtx{\ctx}{x}{\TMV_1}}{\ZCMV}{\TMV_2}{\ZCMV'}{\TMV_2'}{\AMV}
  }{
    \ASEAction{\ctx}{\ZCLamE{x}{\TMV_1}{\ZCMV}}{\TArrow{\TMV_1}{\TMV_2}}{\ZCLamE{x}{\TMV_1}{\ZCMV'}}{\TArrow{\ZTMV_1}{\TMV_2'}}{\AMV}
  }

  \inferrule[ASEZipApL1]{
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV_1}}{\TMV_1} \\
    \ASEAction{\ctx}{\ZCMV_1}{\TMV_1}{\ZCMV_1'}{\TMV_1'}{\AMV} \\\\
    \matchedArrow{\TMV_1'}{\TMV_2}{\TMV_3} \\
    \ctxAnaType{\ctx}{\ECMV_2}{\TMV_2}
  }{
    \ASEAction{\ctx}{\ZCApL{\ZCMV_1}{\ECMV_2}}{\TMV}{\ZCApL{\ZCMV_1'}{\ECMV_2}}{\TMV_3}{\AMV}
  }

  \inferrule[ASEZipApL2]{
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV_1}}{\TMV_1} \\
    \ASEAction{\ctx}{\ZCMV_1}{\TMV_1}{\ZCMV_1'}{\TMV_1'}{\AMV} \\\\
    \matchedArrow{\TMV_1'}{\TMV_2}{\TMV_3} \\
    \ctxNotAnaType{\ctx}{\ECMV_2}{\TMV_2}
  }{
    \ASEAction{\ctx}{\ZCApL{\ZCMV_1}{\ECMV_2}}{\TMV}{\ZCApL{\ZCMV_1'}{\ECInconType{\ECMV_2}}}{\TMV_3}{\AMV}
  }

  \inferrule[ASEZipApL3]{
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV_1}}{\TMV_1} \\
    \ASEAction{\ctx}{\ZCMV_1}{\TMV_1}{\ZCMV_1'}{\TMV_1'}{\AMV} \\\\
    \notMatchedArrow{\TMV_1'}
  }{
    \ASEAction{\ctx}{\ZCApL{\ZCMV_1}{\ECMV_2}}{\TMV}{\ZCApSynNonMatchedArrowL{\ZCMV_1'}{\ECMV_2}}{\TUnknown}{\AMV}
  }

  \inferrule[ASEZipApL4]{
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV_1}}{\TMV_1} \\
    \ASEAction{\ctx}{\ZCMV_1}{\TMV_1}{\ZCMV_1'}{\TMV_1'}{\AMV} \\\\
    \matchedArrow{\TMV_1'}{\TMV_2}{\TMV_3} \\
    \ctxAnaType{\ctx}{\ECMV_2}{\TMV_2}
  }{
    \ASEAction{\ctx}{\ZCApL{\ECInconType{\ZCMV_1}}{\ECMV_2}}{\TUnknown}{\ZCApL{\ZCMV_1'}{\ECMV_2}}{\TMV_3}{\AMV}
  }

  \inferrule[ASEZipApL5]{
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV_1}}{\TMV_1} \\
    \ASEAction{\ctx}{\ZCMV_1}{\TMV_1}{\ZCMV_1'}{\TMV_1'}{\AMV} \\\\
    \matchedArrow{\TMV_1'}{\TMV_2}{\TMV_3} \\
    \ctxNotAnaType{\ctx}{\ECMV_2}{\TMV_2}
  }{
    \ASEAction{\ctx}{\ZCApL{\ECInconType{\ZCMV_1}}{\ECMV_2}}{\TUnknown}{\ZCApL{\ZCMV_1'}{\ECInconType{\ECMV_2}}}{\TMV_3}{\AMV}
  }

  \inferrule[ASEZipApL6]{
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV_1}}{\TMV_1} \\
    \ASEAction{\ctx}{\ZCMV_1}{\TMV_1}{\ZCMV_1'}{\TMV_1'}{\AMV} \\\\
    \notMatchedArrow{\TMV_1'}
  }{
    \ASEAction{\ctx}{\ZCApL{\ECInconType{\ZCMV_1}}{\ECMV_2}}{\TUnknown}{\ZCApL{\ECInconType{\ZCMV_1'}}{\ECMV_2}}{\TUnknown}{\AMV}
  }

  \inferrule[ASEZipApR1]{
    \ctxSynTypeM{\ctx}{\ECMV_1}{\TMV_1} \\
    \matchedArrow{\TMV_1}{\TMV_2}{\TMV_3} \\
    \AAEAction{\ctx}{\ZCMV_2}{\ZCMV_2'}{\TMV_2}{\AMV}
  }{
    \ASEAction{\ctx}{\ZCApR{\ECMV_1}{\ZCMV_2}}{\TMV}{\ZCApR{\ECMV_1}{\ZCMV_2'}}{\TMV_3}{\AMV}
  }

  \inferrule[ASEZipApR2]{
    \AAEAction{\ctx}{\ZCMV_2}{\ZCMV_2'}{\TUnknown}{\AMV}
  }{
    \ASEAction{\ctx}{\ZCApSynNonMatchedArrowR{\ECMV_1}{\ZCMV_2}}{\TUnknown}{\ZCApSynNonMatchedArrowR{\ECMV_1}{\ZCMV_2'}}{\TUnknown}{\AMV}
  }

  \inferrule[ASEZipLetL1]{
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV_1}}{\TMV_1} \\
    \ASEAction{\ctx}{\ZCMV_1}{\TMV_1}{\ZCMV_1'}{\TMV_1'}{\AMV} \\
    \equal{\TMV_1}{\TMV_1'}
  }{
    \ASEAction{\ctx}{\ZCLetL{x}{\ZCMV_1}{\ECMV_2}}{\TMV_2}{\ZCLetL{x}{\ZCMV_1'}{\ECMV_2}}{\TMV_2}{\AMV}
  }

  \inferrule[ASEZipLetL2]{
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV_1}}{\TMV_1} \\
    \ASEAction{\ctx}{\ZCMV_1}{\TMV_1}{\ZCMV_1'}{\TMV_1'}{\AMV} \\\\
    \notEqual{\TMV_1}{\TMV_1'} \\
    \ctxSynFixedInto{\extendCtx{\ctx}{x}{\TMV_1'}}{\erase{\ECMV_2}}{\ECMV_2'}{\TMV_2'}
  }{
    \ASEAction{\ctx}{\ZCLetL{x}{\ZCMV_1}{\ECMV_2}}{\TMV_2}{\ZCLetL{x}{\ZCMV_1'}{\ECMV_2'}}{\TMV_2'}{\AMV}
  }

  \inferrule[ASEZipLetR]{
    \ctxSynTypeM{\ctx}{\ECMV_1}{\TMV_1} \\
    \ctxSynTypeM{\extendCtx{\ctx}{x}{\TMV_1}}{\cursorErase{\ZCMV_2}}{\TMV_2} \\\\
    \ASEAction{\extendCtx{\ctx}{x}{\TMV_1}}{\ZCMV_2}{\TMV_2}{\ZCMV_2'}{\TMV_2'}{\AMV}
  }{
    \ASEAction{\ctx}{\ZCLetR{x}{\ECMV_1}{\ZCMV_2}}{\TMV_2}{\ZCLetR{x}{\ECMV_1}{\ZCMV_2'}}{\TMV_2'}{\AMV}
  }

  \inferrule[ASEZipPlusL]{
    \AAEAction{\ctx}{\ZCMV}{\ZCMV'}{\TNum}{\AMV}
  }{
    \ASEAction{\ctx}{\ZCPlusL{\ZCMV}{\ECMV}}{\TNum}{\ZCPlusL{\ZCMV'}{\ECMV}}{\TNum}{\AMV}
  }

  \inferrule[ASEZipPlusR]{
    \AAEAction{\ctx}{\ZCMV}{\ZCMV'}{\TNum}{\AMV}
  }{
    \ASEAction{\ctx}{\ZCPlusR{\ECMV}{\ZCMV}}{\TNum}{\ZCPlusR{\ECMV}{\ZCMV'}}{\TNum}{\AMV}
  }

  \inferrule[ASEZipIfC]{
    \AAEAction{\ctx}{\ZCMV}{\ZCMV'}{\TBool}{\AMV}
  }{
    \ASEAction{\ctx}{\ZCIfC{\ZCMV}{\ECMV_1}{\ECMV_2}}{\TMV}{\ZCIfC{\ZCMV'}{\ECMV_1}{\ECMV_2}}{\TMV}{\AMV}
  }

  \inferrule[ASEZipIfL1]{
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV}}{\TMV_1} \\
    \ctxSynTypeM{\ctx}{\ECMV_2}{\TMV_2} \\\\
    \ASEAction{\ctx}{\ZCMV}{\TMV_1}{\ZCMV'}{\TMV_1'}{\AMV} \\
    \consistent{\TMV_1'}{\TMV_2}
  }{
    \ASEAction{\ctx}{\ZCIfL{\ECMV_1}{\ZCMV}{\ECMV_2}}{\TMV}{\ZCIfL{\ECMV_1}{\ZCMV'}{\ECMV_2}}{\TMeet{\TMV_1'}{\TMV_2}}{\AMV}
  }

  \inferrule[ASEZipIfL2]{
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV}}{\TMV_1} \\
    \ctxSynTypeM{\ctx}{\ECMV_2}{\TMV_2} \\\\
    \ASEAction{\ctx}{\ZCMV}{\TMV_1}{\ZCMV'}{\TMV_1'}{\AMV} \\
    \inconsistent{\TMV_1'}{\TMV_2}
  }{
    \ASEAction{\ctx}{\ZCIfL{\ECMV_1}{\ZCMV}{\ECMV_2}}{\TMV}{\ZCInconBrL{\ECMV_1}{\ZCMV'}{\ECMV_2}}{\TUnknown}{\AMV}
  }

  \inferrule[ASEZipIfR1]{
    \ctxSynTypeM{\ctx}{\ECMV_2}{\TMV_1} \\
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV}}{\TMV_2} \\\\
    \ASEAction{\ctx}{\ZCMV}{\TMV_2}{\ZCMV'}{\TMV_2'}{\AMV} \\
    \consistent{\TMV_1}{\TMV_2'}
  }{
    \ASEAction{\ctx}{\ZCIfR{\ECMV_1}{\ECMV_2}{\ZCMV}}{\TMV}{\ZCIfR{\ECMV_1}{\ECMV_2}{\ZCMV'}}{\TMeet{\TMV_1}{\TMV_2'}}{\AMV}
  }

  \inferrule[ASEZipIfR2]{
    \ctxSynTypeM{\ctx}{\ECMV_1}{\TMV_1} \\
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV}}{\TMV_2} \\\\
    \ASEAction{\ctx}{\ZCMV}{\TMV_2}{\ZCMV'}{\TMV_2'}{\AMV} \\
    \inconsistent{\TMV_1}{\TMV_2'}
  }{
    \ASEAction{\ctx}{\ZCIfR{\ECMV_1}{\ECMV_2}{\ZCMV}}{\TMV}{\ZCInconBrR{\ECMV_1}{\ECMV_2}{\ZCMV'}}{\TUnknown}{\AMV}
  }

  \inferrule[ASEZipInconsistentBranchesC]{
    \AAEAction{\ctx}{\ZCMV}{\ZCMV'}{\TBool}{\AMV}
  }{
    \ASEAction{\ctx}{\ZCInconBrC{\ZCMV}{\ECMV_1}{\ECMV_2}}{\TMV}{\ZCInconBrC{\ZCMV'}{\ECMV_1}{\ECMV_2}}{\TMV}{\AMV}
  }

  \inferrule[ASEZipInconsistentBranchesL1]{
    \ASEAction{\ctx}{\ZCMV}{\TMV_1}{\ZCMV'}{\TMV_1'}{\AMV} \\
    \ctxSynTypeM{\ctx}{\ECMV_2}{\TMV_2} \\
    \consistent{\TMV_1'}{\TMV_2}
  }{
    \ASEAction{\ctx}{\ZCInconBrL{\ECMV_1}{\ZCMV}{\ECMV_2}}{\TMV}{\ZCIfL{\ECMV_1}{\ZCMV'}{\ECMV_2}}{\TMeet{\TMV_1'}{\TMV_2}}{\AMV}
  }

  \inferrule[ASEZipInconsistentBranchesL2]{
    \ASEAction{\ctx}{\ZCMV}{\TMV_1}{\ZCMV'}{\TMV_1'}{\AMV} \\
    \ctxSynTypeM{\ctx}{\ECMV_2}{\TMV_2} \\
    \inconsistent{\TMV_1'}{\TMV_2}
  }{
    \ASEAction{\ctx}{\ZCInconBrL{\ECMV_1}{\ZCMV}{\ECMV_2}}{\TMV}{\ZCInconBrL{\ECMV_1}{\ZCMV'}{\ECMV_2}}{\TUnknown}{\AMV}
  }

  \inferrule[ASEZipInconsistentBranchesR1]{
    \ctxSynTypeM{\ctx}{\ECMV_1}{\TMV_1} \\
    \ASEAction{\ctx}{\ZCMV}{\TMV_2}{\ZCMV'}{\TMV_2'}{\AMV} \\
    \consistent{\TMV_1}{\TMV_2'}
  }{
    \ASEAction{\ctx}{\ZCInconBrR{\ECMV_1}{\ECMV_2}{\ZCMV}}{\TMV}{\ZCIfL{\ECMV_1}{\ECMV_2}{\ZCMV'}}{\TMeet{\TMV_1}{\TMV_2'}}{\AMV}
  }

  \inferrule[ASEZipInconsistentBranchesR2]{
    \ctxSynTypeM{\ctx}{\ECMV_2}{\TMV_1} \\
    \ASEAction{\ctx}{\ZCMV}{\TMV_2}{\ZCMV'}{\TMV_2'}{\AMV} \\
    \inconsistent{\TMV_1}{\TMV_2'}
  }{
    \ASEAction{\ctx}{\ZCInconBrR{\ECMV_1}{\ECMV_2}{\ZCMV}}{\TMV}{\ZCInconBrR{\ECMV_1}{\ECMV_2}{\ZCMV'}}{\TUnknown}{\AMV}
  }

  \inferrule[ASEZipPairL]{
    \ASEAction{\ctx}{\ZCMV}{\TMV_1}{\ZCMV'}{\TMV_1'}{\AMV}
  }{
    \ASEAction{\ctx}{\ZCPairL{\ZCMV}{\ECMV}}{\TProd{\TMV_1}{\TMV_2}}{\ZCPairL{\ZCMV'}{\ECMV}}{\TProd{\TMV_1'}{\TMV_2}}{\AMV}
  }

  \inferrule[ASEZipPairR]{
    \ASEAction{\ctx}{\ZCMV}{\TMV_2}{\ZCMV'}{\TMV_2'}{\AMV}
  }{
    \ASEAction{\ctx}{\ZCPairR{\ECMV}{\ZCMV}}{\TProd{\TMV_1}{\TMV_2}}{\ZCPairR{\ECMV}{\ZCMV'}}{\TProd{\TMV_1'}{\TMV_2}}{\AMV}
  }

  \inferrule[ASEZipProjL1]{
    \ASEAction{\ctx}{\ZCMV}{\TMV}{\ZCMV'}{\TMV'}{\AMV} \\
    \matchedProd{\TMV'}{\TMV_1'}{\TMV_2'}
  }{
    \ASEAction{\ctx}{\ZCProjL{\ZCMV}}{\TMV_1}{\ZCProjL{\ZCMV'}}{\TMV_1'}{\AMV}
  }

  \inferrule[ASEZipProjL2]{
    \ASEAction{\ctx}{\ZCMV}{\TMV}{\ZCMV'}{\TMV'}{\AMV} \\
    \notMatchedProd{\TMV'}
  }{
    \ASEAction{\ctx}{\ZCProjL{\ZCMV}}{\TMV_1}{\ZCProjLSynNonMatchedProd{\ZCMV'}}{\TUnknown}{\AMV}
  }

  \inferrule[ASEZipProjL3]{
    \ASEAction{\ctx}{\ZCMV}{\TMV}{\ZCMV'}{\TMV'}{\AMV} \\
    \matchedProd{\TMV'}{\TMV_1'}{\TMV_2'}
  }{
    \ASEAction{\ctx}{\ZCProjLSynNonMatchedProd{\ZCMV}}{\TUnknown}{\ZCProjL{\ZCMV'}}{\TMV_1'}{\AMV}
  }

  \inferrule[ASEZipProjL4]{
    \ASEAction{\ctx}{\ZCMV}{\TMV}{\ZCMV'}{\TMV'}{\AMV} \\
    \notMatchedProd{\TMV'}
  }{
    \ASEAction{\ctx}{\ZCProjLSynNonMatchedProd{\ZCMV}}{\TUnknown}{\ZCProjLSynNonMatchedProd{\ZCMV'}}{\TUnknown}{\AMV}
  }

  \inferrule[ASEZipProjR1]{
    \ASEAction{\ctx}{\ZCMV}{\TMV}{\ZCMV'}{\TMV'}{\AMV} \\
    \matchedProd{\TMV'}{\TMV_1'}{\TMV_2'}
  }{
    \ASEAction{\ctx}{\ZCProjR{\ZCMV}}{\TMV_2}{\ZCProjR{\ZCMV'}}{\TMV_2'}{\AMV}
  }

  \inferrule[ASEZipProjR2]{
    \ASEAction{\ctx}{\ZCMV}{\TMV}{\ZCMV'}{\TMV'}{\AMV} \\
    \notMatchedProd{\TMV'}
  }{
    \ASEAction{\ctx}{\ZCProjR{\ZCMV}}{\TMV_2}{\ZCProjRSynNonMatchedProd{\ZCMV'}}{\TUnknown}{\AMV}
  }

  \inferrule[ASEZipProjL3]{
    \ASEAction{\ctx}{\ZCMV}{\TMV}{\ZCMV'}{\TMV'}{\AMV} \\
    \matchedProd{\TMV'}{\TMV_1'}{\TMV_2'}
  }{
    \ASEAction{\ctx}{\ZCProjRSynNonMatchedProd{\ZCMV}}{\TUnknown}{\ZCProjR{\ZCMV'}}{\TMV_2'}{\AMV}
  }

  \inferrule[ASEZipProjR4]{
    \ASEAction{\ctx}{\ZCMV}{\TMV}{\ZCMV'}{\TMV'}{\AMV} \\
    \notMatchedProd{\TMV'}
  }{
    \ASEAction{\ctx}{\ZCProjRSynNonMatchedProd{\ZCMV}}{\TUnknown}{\ZCProjRSynNonMatchedProd{\ZCMV'}}{\TUnknown}{\AMV}
  }
\end{mathparpagebreakable}

\subsubsection{Analytic expression actions}
\label{sec:typed-analytic-expression-actions}
\judgbox{\ensuremath{\AAAction{\ctx}{\ZCMV}{\ZCMV'}{\TMV'}{\AMV}}}

\paragraph{Subsumption}
\begin{mathpar}
  \inferrule[AAESubsume1]{
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV}}{\TMV'} \\
    \ASAction{\ctx}{\ZCMV}{\TMV'}{\ZCMV'}{\TMV''}{\AMV} \\\\
    \consistent{\TMV}{\TMV''} \\
    \subsumable{\cursorErase{\ZCMV}}
  }{
    \AAAction{\ctx}{\ZCMV}{\ZCMV'}{\TMV}{\AMV}
  }

  \inferrule[AAESubsume2]{
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV}}{\TMV'} \\
    \ASAction{\ctx}{\ZCMV}{\TMV'}{\ZCMV'}{\TMV''}{\AMV} \\\\
    \inconsistent{\TMV}{\TMV''} \\
    \subsumable{\cursorErase{\ZCMV}}
  }{
    \AAAction{\ctx}{\ZCMV}{\ZCInconType{\ZCMV'}}{\TMV}{\AMV}
  }

  \inferrule[AAEInconsistentTypes1]{
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV}}{\TMV'} \\
    \ASAction{\ctx}{\ZCMV}{\TMV'}{\ZCMV'}{\TMV''}{\AMV} \\\\
    \consistent{\TMV}{\TMV''} \\
    \subsumable{\cursorErase{\ZCMV}}
  }{
    \AAAction{\ctx}{\ZCInconType{\ZCMV}}{\ZCMV'}{\TMV}{\AMV}
  }

  \inferrule[AAEInconsistentTypes2]{
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV}}{\TMV'} \\
    \ASAction{\ctx}{\ZCMV}{\TMV'}{\ZCMV'}{\TMV''}{\AMV} \\\\
    \inconsistent{\TMV}{\TMV''} \\
    \subsumable{\cursorErase{\ZCMV}}
  }{
    \AAAction{\ctx}{\ZCInconType{\ZCMV}}{\ZCInconType{\ZCMV'}}{\TMV}{\AMV}
  }
\end{mathpar}

\paragraph{Movement}
\begin{mathpar}
  \inferrule[AAEMove]{
    \ASEMove{\ZCMV}{\ZCMV'}{\MMV}
  }{
    \AAMove{\ctx}{\ZCMV}{\ZCMV'}{\TMV}{\MMV}
  }
\end{mathpar}

\paragraph{Deletion}
\begin{mathpar}
  \inferrule[AAEDel]{ }{
    \AAEDel{\ctx}{\ECMV}{\TMV}
  }
\end{mathpar}

\paragraph{Construction} \ \\
\begin{mathparpagebreakable}
  \inferrule[AAEConLam1]{
    \matchedArrow{\TMV}{\TMV_1}{\TMV_2} \\
    \ctxAnaFixedInto{\extendCtx{\ctx}{x}{\TMV_1}}{\erase{\ECMV}}{\ECMV'}{\TMV_2}
  }{
    \AACon{\ctx}{\ZCCursor{\ECMV}}{\ZCLamT{x}{\ZTCursor{\TMV_1}}{\ECMV'}}{\TMV}{\SLam{x}}
  }

  \inferrule[AAEConLam2]{
    \notMatchedArrow{\TMV} \\
    \ctxAnaFixedInto{\extendCtx{\ctx}{x}{\TUnknown}}{\erase{\ECMV}}{\ECMV'}{\TUnknown}
  }{
    \AACon{\ctx}{\ZCCursor{\ECMV}}{\ZCInconType{\ZCLamT{x}{\ZTCursor{\TUnknown}}{\ECMV'}}}{\TMV}{\SLam{x}}
  }

  \inferrule[AAEConLetL]{
    \ctxSynFixedInto{\ctx}{\erase{\ECMV}}{\ECMV'}{\TMV}
  }{
    \AACon{\ctx}{\ZCCursor{\ECMV}}{\ZCLetL{x}{\ECMV'}{\ZCCursor{\ECEHole}}}{\TMV}{\SLetL{x}}
  }

  \inferrule[AAEConLetR]{
    \ctxAnaFixedInto{\extendCtx{\ctx}{x}{\TUnknown}}{\erase{\ECMV}}{\ECMV'}{\TMV}
  }{
    \AACon{\ctx}{\ZCCursor{\ECMV}}{\ZCLetR{x}{\ZCCursor{\ECEHole}}{\ECMV'}}{\TMV}{\SLetR{x}}
  }
 
  \inferrule[AAEConIfC]{
    \ctxAnaFixedInto{\ctx}{\ECMV}{\ECMV'}{\TBool}
  }{
    \AACon{\ctx}{\ZCCursor{\ECMV}}{\ZCIfL{\ECMV'}{\ZCCursor{\ECEHole}}{\ECEHole}}{\TMV}{\SIfC}
  }
 
  \inferrule[AAEConIfL]{ }{
    \AACon{\ctx}{\ZCCursor{\ECMV}}{\ZCIfC{\ZCCursor{\ECEHole}}{\ECMV'}{\ECEHole}}{\TMV}{\SIfL}
  }

  \inferrule[AAEConIfR]{ }{
    \AACon{\ctx}{\ZCCursor{\ECMV}}{\ZCIfC{\ZCCursor{\ECEHole}}{\ECEHole}{\ECMV'}}{\TMV}{\SIfR}
  }

  \inferrule[AAEConPairL1]{
    \matchedProd{\TMV}{\TMV_1}{\TMV_2} \\
    \ctxAnaFixedInto{\ctx}{\erase{\ECMV}}{\ECMV'}{\TMV_1}
  }{
    \AACon{\ctx}{\ZCursor{\ECMV}}{\ZCPairL{\ECMV'}{\ZCursor{\ECEHole}}}{\TMV}{\SPairL}
  }

  \inferrule[AAEConPairL2]{
    \notMatchedProd{\TMV} \\
    \ctxAnaFixedInto{\ctx}{\erase{\ECMV}}{\ECMV'}{\TUnknown}
  }{
    \AACon{\ctx}{\ZCursor{\ECMV}}{\ZCPairAnaNonMatchedProdL{\ECMV'}{\ZCursor{\ECEHole}}}{\TMV}{\SPairL}
  }

  \inferrule[AAEConPairR1]{
    \matchedProd{\TMV}{\TMV_1}{\TMV_2} \\
    \ctxAnaFixedInto{\ctx}{\erase{\ECMV}}{\ECMV'}{\TMV_2}
  }{
    \AACon{\ctx}{\ZCursor{\ECMV}}{\ZCPairR{\ZCursor{\ECEHole}}{\ECMV'}}{\TMV}{\SPairR}
  }

  \inferrule[AAEConPairR2]{
    \notMatchedProd{\TMV} \\
    \ctxAnaFixedInto{\ctx}{\erase{\ECMV}}{\ECMV'}{\TUnknown}
  }{
    \AACon{\ctx}{\ZCursor{\ECMV}}{\ZCPairAnaNonMatchedProdR{\ZCursor{\ECEHole}}{\ECMV'}}{\TMV}{\SPairR}
  }
\end{mathparpagebreakable}

\paragraph{Zipper Cases} \ \\
\begin{mathparpagebreakable}
  \inferrule[AAEZipLamT1]{
    \AUTAction{\ZTMV}{\ZTMV'}{\AMV} \\
    \consistent{\cursorErase{\ZTMV}}{\cursorErase{\ZTMV'}}
  }{
    \AAAction{\ctx}{\ZCLamT{x}{\ZTMV}{\ECMV}}{\ZCLamT{x}{\ZTMV'}{\ECMV}}{\TMV}{\AMV}
  }

  \inferrule[AAEZipLamT2]{
    \AUTAction{\ZTMV}{\ZTMV'}{\AMV} \\
    \inconsistent{\cursorErase{\ZTMV}}{\cursorErase{\ZTMV'}} \\
    \matchedArrow{\TMV}{\TMV_1}{\TMV_2} \\\\
    \consistent{\cursorErase{\ZTMV'}}{\TMV_1} \\
    \ctxAnaFixedInto{\extendCtx{\ctx}{x}{\cursorErase{\ZTMV'}}}{\erase{\ECMV}}{\ECMV'}{\TMV_2}
  }{
    \AAAction{\ctx}{\ZCLamT{x}{\ZTMV}{\ECMV}}{\ZCLamT{x}{\ZTMV'}{\ECMV'}}{\TMV}{\AMV}
  }

  \inferrule[AAEZipLamT3]{
    \AUTAction{\ZTMV}{\ZTMV'}{\AMV} \\
    \inconsistent{\cursorErase{\ZTMV}}{\cursorErase{\ZTMV'}} \\
    \matchedArrow{\TMV}{\TMV_1}{\TMV_2} \\\\
    \inconsistent{\cursorErase{\ZTMV'}}{\TMV_1} \\
    \ctxAnaFixedInto{\extendCtx{\ctx}{x}{\TMV_1}}{\erase{\ECMV}}{\ECMV'}{\TMV_2}
  }{
    \AAAction{\ctx}{\ZCLamT{x}{\ZTMV}{\ECMV}}{\ZCInconType{\ZCLamT{x}{\ZTMV'}{\ECMV'}}}{\TMV}{\AMV}
  }

  \inferrule[AAEZipLamE]{
    \matchedArrow{\TMV}{\TMV_1}{\TMV_2} \\
    \AAAction{\extendCtx{\ctx}{x}{\TMV_3}}{\ZCMV}{\ZCMV'}{\TMV_2}{\AMV}
  }{
    \AAAction{\ctx}{\ZCLamE{x}{\TMV_3}{\ZCMV}}{\ZCLamE{x}{\TMV_3}{\ZCMV'}}{\TMV}{\AMV}
  }

  \inferrule[AAEZipLetL1]{
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV}}{\TMV_1} \\
    \ASEAction{\ctx}{\ZCMV}{\TMV_1}{\ZCMV'}{\TMV_1'}{\AMV} \\
    \consistent{\TMV_1}{\TMV_1'}
  }{
    \AAAction{\ctx}{\ZCLetL{x}{\ZCMV}{\ECMV}}{\ZCLetL{x}{\ZCMV'}{\ECMV}}{\TMV}{\AMV}
  }

  \inferrule[AAEZipLetL2]{
    \ctxSynTypeM{\ctx}{\cursorErase{\ZCMV}}{\TMV_1} \\
    \ASEAction{\ctx}{\ZCMV}{\TMV_1}{\ZCMV'}{\TMV_1'}{\AMV} \\\\
    \ctxAnaFixedInto{\extendCtx{\ctx}{x}{\TMV_1'}}{\erase{\ECMV}}{\ECMV'}{\TMV}
  }{
    \AAAction{\ctx}{\ZCLetL{x}{\ZCMV}{\ECMV}}{\ZCLetL{x}{\ZCMV'}{\ECMV'}}{\TMV}{\AMV}
  }

  \inferrule[AAEZipLetR]{
    \ctxSynTypeM{\ctx}{\ECMV}{\TMV'} \\
    \AAAction{\extendCtx{\ctx}{x}{\TMV'}}{\ZCMV}{\ZCMV'}{\TMV}{\AMV}
  }{
    \AAAction{\ctx}{\ZCLetR{x}{\ECMV}{\ZCMV}}{\ZCLetL{x}{\ECMV}{\ZCMV'}}{\TMV}{\AMV}
  }

  \inferrule[AAEZipIfC]{
    \AAAction{\ctx}{\ZCMV}{\ZCMV'}{\TBool}{\AMV}
  }{
    \AAAction{\ctx}{\ZCIfC{\ZCMV}{\ECMV_1}{\ECMV_2}}{\ZCIfC{\ZCMV'}{\ECMV_1}{\ECMV_2}}{\TMV}{\AMV}
  }

  \inferrule[AAEZipIfL]{
    \AAAction{\ctx}{\ZCMV}{\ZCMV'}{\TMV}{\AMV}
  }{
    \AAAction{\ctx}{\ZCIfL{\ECMV_1}{\ZCMV}{\ECMV_2}}{\ZCIfL{\ECMV_1}{\ZCMV'}{\ECMV_2}}{\TMV}{\AMV}
  }

  \inferrule[AAEZipIfR]{
    \AAAction{\ctx}{\ZCMV}{\ZCMV'}{\TMV}{\AMV}
  }{
    \AAAction{\ctx}{\ZCIfR{\ECMV_1}{\ECMV_2}{\ZCMV}}{\ZCIfR{\ECMV_1}{\ECMV_2}{\ZCMV'}}{\TMV}{\AMV}
  }
\end{mathparpagebreakable}

\subsubsection{Iterated actions}
\label{sec:typed-iterated-actions}
The iterated type action and movements judgments are the same as in the untyped model. \\

\judgbox{\ensuremath{\ASEActionIter{\ctx}{\ZCMV}{\TMV}{\ZCMV'}{\TMV'}{\AIMV}}}
%
\begin{mathpar}
  \inferrule[ASEIRefl]{ }{
    \ASEActionIter{\ctx}{\ZCMV}{\TMV}{\ZCMV}{\TMV}{\AINil}
  }

  \inferrule[ASEIExp]{
    \ASEAction{\ctx}{\ZCMV}{\TMV}{\ZCMV'}{\TMV'}{\AMV} \\
    \ASEActionIter{\ctx}{\ZCMV'}{\TMV'}{\ZCMV''}{\TMV''}{\AIMV}
  }{
    \ASEActionIter{\ctx}{\ZCMV}{\TMV}{\ZCMV''}{\TMV''}{\AICons{\AMV}{\AIMV}}
  }
\end{mathpar}

\judgbox{\ensuremath{\AAEActionIter{\ctx}{\ZCMV}{\ZCMV'}{\TMV}{\AIMV}}}
%
\begin{mathpar}
  \inferrule[AAEIRefl]{ }{
    \AAEActionIter{\ctx}{\ZCMV}{\ZCMV}{\TMV}{\AINil}
  }

  \inferrule[AAEIExp]{
    \AAEAction{\ctx}{\ZCMV}{\ZCMV'}{\TMV'}{\AMV} \\
    \AAEActionIter{\ctx}{\ZCMV'}{\ZCMV''}{\TMV''}{\AIMV}
  }{
    \AAEActionIter{\ctx}{\ZCMV}{\ZCMV''}{\TMV''}{\AICons{\AMV}{\AIMV}}
  }
\end{mathpar}

\subsection{Metatheorems}
\label{sec:typed-metatheorems}
\begin{theorem}[name=Sensibility] \
  \begin{enumerate}
    \item If $\zWellFormed{\ZCMV}$ and $\ctxSynTypeM{\ctx}{\cursorErase{\ZCMV}}{\TMV}$ and
      $\ASEAction{\ctx}{\ZCMV}{\TMV}{\ZCMV'}{\TMV'}{\AMV}$, then $\zWellFormed{\ZCMV'}$ and
      $\ctxSynTypeM{\ctx}{\cursorErase{\ZCMV'}}{\TMV'}$.

    \item If $\zWellFormed{\ZCMV}$ and $\ctxAnaType{\ctx}{\cursorErase{\ZCMV}}{\TMV}$ and
      $\AAEAction{\ctx}{\ZCMV}{\ZCMV'}{\TMV}{\AMV}$, then $\zWellFormed{\ZCMV'}$ and
      $\ctxAnaType{\ctx}{\cursorErase{\ZCMV'}}{\TMV}$.
  \end{enumerate}
\end{theorem}

\begin{theorem}[name=Movement Erasure Invariance] \
  \begin{enumerate}
    \item If $\AUTAction{\ZTMV}{\ZTMV'}{\AMove{\MMV}}$, then $\cursorErase{\ZTMV} =
      \cursorErase{\ZTMV'}$.

    \item If $\zWellFormed{\ZCMV}$ and $\ctxSynTypeM{\ctx}{\cursorErase{\ZCMV}}{\TMV}$ and
      $\ASEAction{\ctx}{\ZCMV}{\TMV}{\ZCMV'}{\TMV'}{\AMove{\MMV}}$, then $\zWellFormed{\ZCMV'}$ and
      $\cursorErase{\ZCMV} = \cursorErase{\ZCMV'}$ and $\equal{\TMV}{\TMV'}$.

    \item If $\zWellFormed{\ZCMV}$ and $\ctxAnaType{\ctx}{\cursorErase{\ZCMV}}{\TMV}$ and
      $\AAEAction{\ctx}{\ZCMV}{\ZCMV'}{\TMV}{\AMove{\MMV}}$, then $\zWellFormed{\ZCMV'}$ and
      $\cursorErase{\ZCMV} = \cursorErase{\ZCMV'}$.
  \end{enumerate}
\end{theorem}

\begin{theorem}[name=Reachability] \
  \begin{enumerate}
    \item If $\cursorErase{\ZTMV} = \cursorErase{\ZTMV'}$, then there exists $\AIMV$ such that
      $\movements{\AIMV}$ and $\AUTActionIter{\ZTMV}{\ZTMV'}{\AIMV}$.

    \item If $\zWellFormed{\ZCMV}$ and $\zWellFormed{\ZCMV'}$ and
      $\ctxSynTypeM{\ctx}{\cursorErase{\ZCMV}}{\TMV}$ and $\cursorErase{\ZCMV} = \cursorErase{\ZCMV'}$,
      then there exists $\AIMV$ such that $\movements{\AIMV}$ and
      $\ASEActionIter{\ctx}{\ZCMV}{\TMV}{\ZCMV'}{\TMV}{\AIMV}$.

    \item If $\zWellFormed{\ZCMV}$ and $\zWellFormed{\ZCMV'}$ and
      $\ctxAnaType{\ctx}{\cursorErase{\ZCMV}}{\TMV}$ and $\cursorErase{\ZCMV} = \cursorErase{\ZCMV'}$,
      then there exists $\AIMV$ such that $\movements{\AIMV}$ and
      $\AAEActionIter{\ctx}{\ZCMV}{\ZCMV'}{\TMV}{\AIMV}$.
  \end{enumerate}
\end{theorem}

\begin{lemma}[name=Reach Up] \
  \begin{enumerate}
    \item If $\cursorErase{\ZTMV} = \TMV$, then there exists $\AIMV$ such that $\movements{\AIMV}$
      and $\AUTActionIter{\ZTMV}{\ZTCursor{\TMV}}{\AIMV}$.

    \item If $\zWellFormed{\ZCMV}$ and $\ctxSynTypeM{\ctx}{\cursorErase{\ZCMV}}{\TMV}$ and
      $\cursorErase{\ZCMV} = \ECMV$, then there exists $\AIMV$ such that $\movements{\AIMV}$ and
      $\ASEActionIter{\ctx}{\ZCMV}{\TMV}{\ZCCursor{\ECMV}}{\TMV}{\AIMV}$.

    \item If $\zWellFormed{\ZCMV}$ and $\ctxAnaType{\ctx}{\cursorErase{\ZCMV}}{\TMV}$ and
      $\cursorErase{\ZCMV} = \ECMV$, then there exists $\AIMV$ such that $\movements{\AIMV}$ and
      $\AAEActionIter{\ctx}{\ZCMV}{\ZCCursor{\ECMV}}{\TMV}{\AIMV}$.
  \end{enumerate}
\end{lemma}

\begin{lemma}[name=Reach Down] \
  \begin{enumerate}
    \item If $\cursorErase{\ZTMV} = \TMV$, then there exists $\AIMV$ such that $\movements{\AIMV}$
      and $\AUTActionIter{\ZTCursor{\TMV}}{\ZTMV}{\AIMV}$.

    \item If $\zWellFormed{\ZCMV}$ and $\ctxSynTypeM{\ctx}{\cursorErase{\ZCMV}}{\TMV}$ and
      $\cursorErase{\ZCMV} = \ECMV$, then there exists $\AIMV$ such that $\movements{\AIMV}$ and
      $\ASEActionIter{\ctx}{\ZCCursor{\ECMV}}{\TMV}{\ZCMV}{\TMV}{\AIMV}$.

    \item If $\zWellFormed{\ZCMV}$ and $\ctxAnaType{\ctx}{\cursorErase{\ZCMV}}{\TMV}$ and
      $\cursorErase{\ZCMV} = \ECMV$, then there exists $\AIMV$ such that $\movements{\AIMV}$ and
      $\AAEActionIter{\ctx}{\ZCCursor{\ECMV}}{\ZCMV}{\TMV}{\AIMV}$.
  \end{enumerate}
\end{lemma}

\begin{theorem}[name=Constructability] \
  \begin{enumerate}
    \item For every $\TMV$, there exists $\AIMV$ such that
      $\AUTActionIter{\ZTCursor{\TUnknown}}{\ZTCursor{\TMV}}{\AIMV}$.

    \item If $\ctxSynTypeM{\ctx}{\ECMV}{\TMV}$, then there exists $\AIMV$ such that
      $\ASEActionIter{\ctx}{\ZCCursor{\EEHole}}{\TUnknown}{\ZCCursor{\ECMV}}{\TMV}{\AIMV}$.

    \item If $\ctxAnaType{\ctx}{\ECMV}{\TMV}$, then there exists $\AIMV$ such that
      $\AAEActionIter{\ctx}{\ZCCursor{\EEHole}}{\ZCCursor{\ECMV}}{\TMV}{\AIMV}$.
  \end{enumerate}
\end{theorem}

\begin{theorem}[name=Determinism] \
  \begin{enumerate}
    \item If $\AUTActionIter{\ZTMV}{\ZTMV'}{\AMV}$ and $\AUTActionIter{\ZTMV}{\ZTMV''}{\AMV}$, then
      $\ZTMV' = \ZTMV''$.

    \item If $\zWellFormed{\ZCMV}$ and $\ctxSynTypeM{\ctx}{\cursorErase{\ZCMV}}{\TMV}$ and
      $\ASEActionIter{\ctx}{\ZCMV}{\TMV}{\ZCMV'}{\TMV'}{\AMV}$ and
      $\ASEActionIter{\ctx}{\ZCMV}{\TMV}{\ZCMV''}{\TMV''}{\AMV}$, then $\ZCMV' = \ZCMV''$ and
      $\equal{\TMV'}{\TMV''}$.

    \item If $\zWellFormed{\ZCMV}$ and $\ctxAnaType{\ctx}{\cursorErase{\ZCMV}}{\TMV}$ and
      $\AAEActionIter{\ctx}{\ZCMV}{\ZCMV'}{\TMV}{\AMV}$ and
      $\AAEActionIter{\ctx}{\ZCMV}{\ZCMV''}{\TMV}{\AMV}$, then $\ZCMV' = \ZCMV''$.
  \end{enumerate}
\end{theorem}

\end{document}
